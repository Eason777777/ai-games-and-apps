<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-text="welcome.title">ÈªëÁôΩÊ£ã</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/ai_difficulty.css">
    <link rel="stylesheet" href="css/welcome.css">
    <link rel="stylesheet" href="css/replay.css">
    <link rel="stylesheet" href="css/markdown.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- ÈÄöÁü•ÂÆπÂô® -->
    <div id="notification-container" class="notification-container"></div>

    <div class="container"> <!-- Ê≠°ËøéÂçÄÂüü -->
        <div class="welcome-section">
            <div class="welcome-title"><i class="fas fa-chess"></i> </div>
            <div class="welcome-subtitle"></div>
            <div class="welcome-description">
            </div>
        </div> <!-- Ê®°ÂºèÂç°ÁâáÂçÄ -->
        <div class="mode-cards-container">
            <div class="mode-card" id="card-human-vs-human" data-mode="human-vs-human" role="button" tabindex="0"
                aria-label="ÈÅ∏Êìá‰∫∫È°ûÂ∞çÊà∞‰∫∫È°ûÊ®°Âºè">
                <div class="mode-icon"><i class="fas fa-users"></i></div>
                <div class="mode-title"></div>
                <div class="mode-description"></div>
            </div>
            <div class="mode-card" id="card-human-vs-ai" data-mode="human-vs-ai" role="button" tabindex="0"
                aria-label="ÈÅ∏Êìá‰∫∫È°ûÂ∞çÊà∞AIÊ®°Âºè">
                <div class="mode-icon"><i class="fas fa-robot"></i></div>
                <div class="mode-title"> <span class="mode-recommend"></span></div>
                <div class="mode-description"></div>
            </div>
            <div class="mode-card" id="card-ai-vs-ai" data-mode="ai-vs-ai" role="button" tabindex="0"
                aria-label="ÈÅ∏ÊìáAIÂ∞çÊà∞AIÊ®°Âºè">
                <div class="mode-icon"><i class="fas fa-microchip"></i></div>
                <div class="mode-title"></div>
                <div class="mode-description"></div>
            </div>
        </div>
        <div style="text-align:center;margin-bottom:18px;">
            <button id="view-rules" class="quick-start-btn" aria-label="Êü•ÁúãÈÅäÊà≤Ë¶èÂâá"><i class="fas fa-book"></i> </button>
            <button id="view-about" class="quick-start-btn" aria-label="ÈóúÊñºÊú¨Â∞àÊ°à"><i class="fas fa-info-circle"></i>
                ÈóúÊñºÊú¨Â∞àÊ°à</button>
        </div><!-- ÈÅäÊà≤Ë≥áË®äÈ°ØÁ§∫ -->
        <div class="game-info">
            <div class="player-info">
                <div class="player-icon black-player"></div>
                <span id="game-status"></span>
            </div>
            <div id="score">
                <div class="score-box">
                    <div class="piece-icon black"></div>
                    <span id="black-score">2</span>
                </div>
                <span class="score-divider">:</span>
                <div class="score-box">
                    <div class="piece-icon white"></div>
                    <span id="white-score">2</span>
                </div>
            </div>
        </div>

        <div class="board-container">
            <div id="board"></div>
        </div>
        <div class="controls">
            <div class="game-controls">
                <button id="new-game" aria-label="ÈñãÂßãÊñ∞ÈÅäÊà≤"><i class="fas fa-redo-alt"></i> </button>
                <button id="undo" disabled aria-label="ÊÇîÊ£ã"><i class="fas fa-undo"></i> </button>
            </div>
        </div>
        <footer class="footer">
            <p></p>
        </footer>
    </div> <!-- Êñ∞ÈÅäÊà≤Ë®≠ÂÆö Modal -->
    <div class="modal-setting" id="modal-setting">
        <div class="modal-setting-content">
            <button class="modal-setting-close" title="ÈóúÈñâË®≠ÂÆöË¶ñÁ™ó" aria-label="ÈóúÈñâË®≠ÂÆöË¶ñÁ™ó">&times;</button>
            <div class="modal-setting-title"></div>
            <div class="modal-setting-group mode">
                <span class="modal-setting-label"></span>
                <div class="modal-setting-options">
                    <button class="modal-setting-option mode" data-mode="human-vs-human" aria-label="‰∫∫È°ûÂ∞çÊà∞‰∫∫È°ûÊ®°Âºè"><i
                            class="fas fa-users"></i>
                    </button>
                    <button class="modal-setting-option mode" data-mode="human-vs-ai" aria-label="‰∫∫È°ûÂ∞çÊà∞AIÊ®°Âºè"><i
                            class="fas fa-robot"></i>
                    </button>
                    <button class="modal-setting-option mode" data-mode="ai-vs-ai" aria-label="AIÂ∞çÊà∞AIÊ®°Âºè"><i
                            class="fas fa-microchip"></i>
                    </button>
                </div>
            </div>
            <div class="modal-setting-group ai" style="display:none;">
                <span class="modal-setting-label"></span>
                <div class="modal-setting-options">
                    <button class="modal-setting-option ai" data-level="easy" aria-label="Á∞°ÂñÆÈõ£Â∫¶"></button>
                    <button class="modal-setting-option ai" data-level="medium" aria-label="‰∏≠Á≠âÈõ£Â∫¶"></button>
                    <button class="modal-setting-option ai" data-level="hard" aria-label="Âõ∞Èõ£Èõ£Â∫¶"></button>
                    <button class="modal-setting-option ai" data-level="super-hard" aria-label="Ë∂ÖÂõ∞Èõ£Èõ£Â∫¶"></button>
                </div>
            </div>
            <div class="modal-setting-group color" style="display:none;">
                <span class="modal-setting-label"></span>
                <div class="modal-setting-options">
                    <button class="modal-setting-option color" data-color="black" aria-label="ÈÅ∏ÊìáÈªëËâ≤Ê£ãÂ≠ê"></button>
                    <button class="modal-setting-option color" data-color="white" aria-label="ÈÅ∏ÊìáÁôΩËâ≤Ê£ãÂ≠ê"></button>
                </div>
            </div>
            <div class="modal-setting-action">
                <button id="modal-setting-confirm" aria-label="Á¢∫Ë™çË®≠ÂÆö‰∏¶ÈñãÂßãÊñ∞ÈÅäÊà≤"></button>
            </div>
        </div>
    </div> <!-- Âü∫Êú¨ÈÄöÁü•Modal (Áî®ÊñºÁ∞°ÂñÆÊ∂àÊÅØÂíåË∑≥ÈÅéÂõûÂêà) -->
    <div class="modal" id="notification-modal">
        <div class="modal-content">
            <span class="close-button" id="notification-close" aria-label="ÈóúÈñâÈÄöÁü•" title="ÈóúÈñâÈÄöÁü•">&times;</span>
            <h2 id="notification-title"></h2>
            <p id="notification-message"></p>
            <div id="notification-actions">
                <button id="notification-confirm" aria-label="Á¢∫Ë™çÈÄöÁü•Ë®äÊÅØ">Á¢∫Ë™ç</button>
            </div>
        </div>
    </div>

    <!-- ÈÅäÊà≤Ë¶èÂâáModal -->
    <div class="modal" id="rules-modal">
        <div class="modal-content">
            <span class="close-button" id="rules-close" aria-label="ÈóúÈñâÈÅäÊà≤Ë¶èÂâá" title="ÈóúÈñâÈÅäÊà≤Ë¶èÂâá">&times;</span>
            <h2 id="rules-title"></h2>
            <div id="rules-content"></div>
            <div id="rules-actions">
                <button id="rules-confirm" aria-label="ÊàëÂ∑≤‰∫ÜËß£ÈÅäÊà≤Ë¶èÂâá">Áü•ÈÅì‰∫Ü</button>
            </div>
        </div>
    </div>

    <!-- ÈóúÊñºÊú¨Â∞àÊ°àModal -->
    <div class="modal" id="about-modal">
        <div class="modal-content">
            <span class="close-button" id="about-close" aria-label="ÈóúÈñâÈóúÊñºÊú¨Â∞àÊ°à" title="ÈóúÈñâÈóúÊñºÊú¨Â∞àÊ°à">&times;</span>
            <h2 id="about-title">ÈóúÊñºÊú¨Â∞àÊ°à</h2>
            <div id="about-content" class="markdown-content"></div>
            <div id="about-actions">
                <button id="about-confirm" aria-label="ÊàëÂ∑≤‰∫ÜËß£Êú¨Â∞àÊ°àË≥áË®ä">Áü•ÈÅì‰∫Ü</button>
            </div>
        </div>
    </div>

    <!-- ÈÅäÊà≤ÁµêÊùüModal (Áî®ÊñºÂ§öÊåâÈàïÁöÑË§áÈõúÊìç‰Ωú) -->
    <div class="modal" id="game-end-modal">
        <div class="modal-content">
            <span class="close-button" id="game-end-close" aria-label="ÈóúÈñâÈÅäÊà≤ÁµêÊùüË®äÊÅØ" title="ÈóúÈñâÈÅäÊà≤ÁµêÊùüË®äÊÅØ">&times;</span>
            <h2 id="game-end-title"></h2>
            <div id="game-end-message"></div>
            <div id="game-end-actions">
                <!-- ÂãïÊÖãÁîüÊàêÊåâÈàï -->
            </div>
        </div>
    </div>

    <!-- ÂõûÊîæÊ®°ÊÖãÊ°Ü -->
    <div id="replay-modal" class="modal replay-modal">
        <div class="modal-content replay-content"> <!-- Ê®ôÈ°åÂàó -->
            <div class="replay-header">
                <h2><i class="fas fa-play-circle"></i> Ê£ãË≠úÂõûÊîæ</h2>
                <button class="close-btn" aria-label="ÈóúÈñâÊ£ãË≠úÂõûÊîæ" title="ÈóúÈñâÊ£ãË≠úÂõûÊîæ">&times;</button>
            </div>
            <!-- ÂõûÊîæÂçÄÂüü - Ê∞¥Âπ≥ÂàÜÂâ≤‰ΩàÂ±Ä -->
            <div class="replay-body">
                <!-- Â∑¶ÂÅ¥Ê£ãÁõ§ÂçÄÂüü -->
                <div class="replay-board-section">
                    <div class="replay-board-container">
                        <div id="replay-board" class="board"></div>
                    </div>
                </div>

                <!-- Âè≥ÂÅ¥ÊéßÂà∂Èù¢Êùø -->
                <div class="replay-control-panel">
                    <!-- ÈÅäÊà≤ÁãÄÊÖãÂçÄÂüü -->
                    <div class="game-status-section">
                        <div class="game-status-title">ÈÅäÊà≤Ë≥áË®ä</div>
                        <div class="game-info-panel">
                            <div class="game-info-row">
                                <span class="game-info-label">ÈÅäÊà≤Ê®°ÂºèÔºö</span>
                                <span class="game-info-value" id="replay-game-mode">-</span>
                            </div>
                            <div class="game-info-row">
                                <span class="game-info-label">ÊúÄÁµÇÁµêÊûúÔºö</span>
                                <span class="game-info-value" id="replay-result">-</span>
                            </div>
                            <div class="game-info-row">
                                <span class="game-info-label">Áï∂ÂâçÊØîÂàÜÔºö</span>
                                <span class="game-info-value">
                                    <div id="replay-current-score" class="current-score">
                                        <span class="score-item">
                                            <span class="score-color black"></span>
                                            <span id="replay-black-score">2</span>
                                        </span>
                                        <span class="score-separator">:</span>
                                        <span class="score-item">
                                            <span class="score-color white"></span>
                                            <span id="replay-white-score">2</span>
                                        </span>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Êí≠ÊîæÊéßÂà∂ÂçÄÂüü -->
                    <div class="playback-controls-section">
                        <div class="controls-title">Êí≠ÊîæÊéßÂà∂</div>
                        <div class="control-buttons">
                            <button id="replay-start" class="control-btn" title="Ë∑≥Âà∞ÈñãÂßã" aria-label="Ë∑≥Âà∞ÈñãÂßã">
                                <i class="fas fa-step-backward"></i>
                            </button>
                            <button id="replay-prev" class="control-btn" title="‰∏ä‰∏ÄÊ≠•" aria-label="‰∏ä‰∏ÄÊ≠•">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button id="replay-play" class="control-btn play-pause" title="Êí≠Êîæ" aria-label="Êí≠ÊîæÊàñÊö´ÂÅú">
                                <i class="fas fa-play"></i>
                            </button>
                            <button id="replay-next" class="control-btn" title="‰∏ã‰∏ÄÊ≠•" aria-label="‰∏ã‰∏ÄÊ≠•">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <button id="replay-end" class="control-btn" title="Ë∑≥Âà∞ÁµêÊùü" aria-label="Ë∑≥Âà∞ÁµêÊùü">
                                <i class="fas fa-step-forward"></i>
                            </button>
                        </div>
                        <div class="speed-control">
                            <label for="replay-speed">Êí≠ÊîæÈÄüÂ∫¶Ôºö</label>
                            <select id="replay-speed" aria-label="ÈÅ∏ÊìáÂõûÊîæÊí≠ÊîæÈÄüÂ∫¶">
                                <option value="1">1x</option>
                                <option value="2">2x</option>
                                <option value="3">3x</option>
                            </select>
                        </div>
                    </div>

                    <!-- ÊôÇÈñìËª∏ÂçÄÂüü -->
                    <div class="timeline-section">
                        <div class="timeline-title">ÊôÇÈñìËª∏</div>
                        <div class="progress-container">
                            <label for="replay-progress" class="sr-only">ÂõûÊîæÈÄ≤Â∫¶ÊéßÂà∂</label>
                            <input type="range" id="replay-progress" class="progress-slider" min="0" max="100" value="0"
                                aria-label="ÂõûÊîæÈÄ≤Â∫¶ÊªëÊ°øÔºåÊãñÂãï‰ª•Ë∑≥ËΩâÂà∞ÊåáÂÆöÊ≠•Êï∏" title="ÊãñÂãï‰ª•Ë∑≥ËΩâÂà∞ÊåáÂÆöÊ≠•Êï∏">
                            <div class="progress-info">
                                Á¨¨ <span id="current-step">0</span> Ê≠• / ÂÖ± <span id="total-steps">0</span> Ê≠•
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/textManager.js"></script>
    <script src="js/board.js"></script>
    <script src="js/reversi_ai.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/replay.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
    <script src="js/modal.js"></script>
    <script>
        // ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè
        async function initializeApp() {
            // ËºâÂÖ•ÊñáÂ≠óË≥áÊ∫ê
            await window.textManager.loadTexts();
            // Êõ¥Êñ∞UIÊñáÂ≠ó
            window.textManager.updateUI();            // ÂàùÂßãÂåñÂÖ∂‰ªñÁµÑ‰ª∂
            window.gameStorage = new GameStorage();
            window.reversiAI = new ReversiAI();
            window.game = new Game();
            window.gameSettingModal = new GameSettingModal();
            window.gameSettingModal.init();// Á¢∫‰øùÊ®°ÊÖãÊ°ÜÊñáÊú¨Â∑≤Êõ¥Êñ∞
            if (window.gameSettingModal.updateModalContent) {
                window.gameSettingModal.updateModalContent();
            }

            // ÈñãÁôºËÄÖÊ∏¨Ë©¶Â∑•ÂÖ∑ - Âú®ÊéßÂà∂Âè∞‰∏≠ÂèØÁî®
            window.testGameEndModal = () => {
                if (window.game && window.game.ui) {
                    window.game.ui.testGameEndModal();
                }
            };

            console.log('üéÆ ÈªëÁôΩÊ£ãÈÅäÊà≤Â∑≤ËºâÂÖ•ÔºÅ');
            console.log('üí° ÈñãÁôºËÄÖÊèêÁ§∫ÔºöÂú®ÊéßÂà∂Âè∞Âü∑Ë°å testGameEndModal() ÂèØÊ∏¨Ë©¶ÈÅäÊà≤ÁµêÊùüÊ®°ÊÖãË¶ñÁ™ó');
        }

        // Áï∂DOMËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñÊáâÁî®Á®ãÂºè
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>

</html>